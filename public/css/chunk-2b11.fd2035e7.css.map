{"version":3,"sources":["webpack:///src/router/views/src/router/views/Profile.vue","webpack:///<no source>"],"names":[],"mappings":"AAkRA,wBClRA,yBAAA,aAAA,kBAAA,iBAAA,oBAAA,iBAAA,oBAAA,CDoRA","file":"chunk-2b11.fd2035e7.css","sourcesContent":["<template>\n  <Layout class=\"bg-grey-lightest\">\n    <h1 class=\"text-center my-8\">\n      Your Profile\n    </h1>\n    <div class=\"container mx-auto mb-12\">\n      <div class=\"flex\">\n        <div class=\"w-1/4 pr-8 flex justify-end\">\n          <div class=\"flex flex-col w-48\">\n            <Uploader />\n\n            <ul class=\"list-reset\">\n              <li class=\"py-4 border-b\">\n                <router-link\n                  class=\"text-black font-bold hover:text-green-dark\"\n                  :to=\"{ name: 'dashboard' }\"\n                >\n                  Dashboard\n                </router-link>\n              </li>\n              <li class=\"py-4 border-b\">\n                <a\n                  class=\"text-black font-bold hover:text-green-dark\"\n                  href=\"#\"\n                >\n                  Contact Information\n                </a>\n              </li>\n              <li class=\"py-4 border-b\">\n                <a\n                  class=\"text-black font-bold hover:text-green-dark\"\n                  href=\"#\"\n                >\n                  Password\n                </a>\n              </li>\n              <li class=\"py-4 border-b\">\n                <a\n                  class=\"text-black font-bold hover:text-green-dark\"\n                  href=\"#\"\n                >\n                  Deposit Funds\n                </a>\n              </li>\n              <li class=\"py-4 border-b\">\n                <a\n                  class=\"text-black font-bold hover:text-green-dark\"\n                  href=\"#\"\n                >\n                  Withdraw Funds\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"bg-white h-full flex-1 rounded-lg text-grey-darkest p-4 shadow-lg\">\n          <div class=\"flex items-center justify-between border-b pb-4 mb-4\">\n            <h2 class=\"font-light text-lg\">\n              Personal Details & Contact Information\n            </h2>\n            <span>76% Complete</span>\n          </div>\n          <form @submit.prevent=\"updateProfile\">\n            <div class=\"flex flex-wrap -mx-4\">\n              <!-- First name -->\n              <BaseInput\n                v-model=\"profile.first_name\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"first_name\"\n                placeholder=\"First name\"\n              />\n\n              <!-- Last name -->\n              <BaseInput\n                v-model=\"profile.last_name\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"last_name\"\n                placeholder=\"Last name\"\n              />\n\n              <!-- Email -->\n              <BaseInput\n                v-model=\"profile.username\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"username\"\n                placeholder=\"Username\"\n              />\n\n              <!-- Email Address -->\n              <BaseInput\n                v-model=\"profile.email\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"email\"\n                placeholder=\"Email Address\"\n              />\n\n              <!-- Address Line 1 -->\n              <BaseInput\n                v-model=\"profile.address.address_1\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"address_1\"\n                placeholder=\"Address Line 1\"\n              />\n\n              <!-- Address Line 2 -->\n              <BaseInput\n                v-model=\"profile.address.address_2\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"address_2\"\n                placeholder=\"Address Line 2\"\n              />\n\n              <!-- Town / City -->\n              <BaseInput\n                v-model=\"profile.address.city\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"city\"\n                placeholder=\"Town / City\"\n              />\n\n              <!-- State / County -->\n              <BaseInput\n                v-model=\"profile.address.state\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"state\"\n                placeholder=\"State / County\"\n              />\n\n              <!-- Country -->\n              <BaseInput\n                v-model=\"profile.address.country\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"country\"\n                placeholder=\"Country\"\n              />\n\n              <!-- Zip code / Postcode -->\n              <BaseInput\n                v-model=\"profile.address.zip_code\"\n                v-validate=\"'required'\"\n                class=\"w-1/2 px-4 my-1\"\n                :target-class=\"{ 'w-full': true }\"\n                name=\"postcode\"\n                placeholder=\"Zip Code / Postcode\"\n              />\n            </div>\n            <div class=\"flex justify-end\">\n              <BaseButton\n                class=\"rounded py-4 w-48 my-2 bg-gradient\"\n                type=\"submit\"\n              >\n                <BaseIcon\n                  v-if=\"load\"\n                  name=\"spinner\"\n                  spin\n                />\n                <span\n                  v-else\n                  class=\"uppercase font-bold\"\n                >\n                  Save\n                </span>\n              </BaseButton>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <!-- <h1>\n      <BaseIcon name=\"user\" />\n      {{ user.name }}\n      Profile\n    </h1> -->\n    <!-- <pre>{{ user }}</pre> -->\n  </Layout>\n</template>\n\n<script>\nimport Layout from '@layouts/Main'\nimport { mapGetters, mapActions } from 'vuex'\nimport { assign, pick } from 'lodash'\nimport Uploader from '@components/Uploader'\nimport { success } from '@utils/toast'\n\nexport default {\n  page() {\n    return {\n      title: this.user.name,\n      meta: [\n        {\n          name: 'description',\n          content: `The user profile for ${this.user.name}.`,\n        },\n      ],\n    }\n  },\n\n  components: { Layout, Uploader },\n\n  data () {\n    return {\n      profile: {\n        first_name: '',\n        last_name: '',\n        email: '',\n        username: '',\n        address: {\n          address_1: '',\n          address_2: '',\n          state: '',\n          city: '',\n          zip_code: '',\n          country: '',\n        }\n      },\n      load: false,\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      user: 'auth/user',\n    })\n  },\n\n  mounted () {\n    assign(this.profile, pick(this.user, ['first_name', 'last_name', 'username', 'email', 'address']))\n  },\n\n  methods: {\n    ...mapActions({\n      updateAddress: 'profile/updateAddress',\n      updateCurrentUser: 'auth/updateCurrentUser'\n    }),\n\n    async updateProfile () {\n      this.load = true\n      const valid = await this.$validator.validateAll()\n\n      if (valid) {\n        try {\n          const { data: { data }} = await this.updateAddress({ profile: this.profile, id: this.user.id })\n          this.updateCurrentUser(data)\n\n          success({ text: 'Account successfully updated.' })\n        } catch (e) {}\n        this.load = false\n      } else {\n        this.load = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n/deep/ input {\n  @apply bg-grey-lightest p-4 rounded my-2 border border-grey-lightest\n}\n</style>\n",null]}