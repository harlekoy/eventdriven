{"version":3,"sources":["webpack:///src/router/views/src/router/views/Register.vue","webpack:///<no source>"],"names":[],"mappings":"AAwIA,wBCxIA,yBAAA,kBAAA,kBAAA,qBAAA,aAAA,UAAA,CD0IA","file":"chunk-9fcf.c0c62883.css","sourcesContent":["<template>\n  <Layout class=\"bg-green-linear\">\n    <div class=\"container mx-auto text-center my-4 md:my-8\">\n      <h1 class=\"font-sans font-thin text-5xl text-green-darker\">\n        Sign up\n      </h1>\n    </div>\n    <form\n      @submit.prevent=\"register\"\n      class=\"w-9/10 sm:w-2/3 md:w-1/2 lg:w-1/3 mx-auto flex flex-col p-10 bg-white rounded-xl shadow-md mb-12\"\n    >\n\n      <BaseInput\n        v-model=\"form.username\"\n        placeholder=\"Username\"\n        :error=\"validationErrors.username\"\n      />\n\n      <BaseInput\n        v-model=\"form.name\"\n        placeholder=\"Name\"\n        :error=\"validationErrors.name\"\n      />\n\n      <BaseInput\n        v-model=\"form.email\"\n        type=\"email\"\n        placeholder=\"Email\"\n        :error=\"validationErrors.email\"\n      />\n\n      <BasePassword\n        v-model=\"form.password\"\n        type=\"password\"\n        placeholder=\"Password\"\n        :error=\"validationErrors.password\"\n      />\n\n      <BaseButton\n        class=\"rounded p-4 my-2\"\n        :disabled=\"load\"\n        type=\"submit\"\n      >\n        <BaseIcon\n          v-if=\"load\"\n          name=\"spinner\"\n          spin\n        />\n        <span v-else>\n          Register\n        </span>\n      </BaseButton>\n\n      <p class=\"py-4 text-center\">\n        <router-link\n          to=\"/login\"\n          class=\"text-sm text-grey-darkest outline-none hover:text-blue-dark\"\n        >\n          Have an account? Sign In\n        </router-link>\n      </p>\n    </form>\n  </Layout>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Layout from '@layouts/Main'\nimport { head, mapValues } from 'lodash'\nimport { mapActions } from 'vuex'\n\nexport default {\n  page: {\n    title: 'Register',\n    meta: [{ name: 'description', content: 'Register' }],\n  },\n\n  components: { Layout },\n\n  data () {\n    return {\n      form: {\n        username: '',\n        email: '',\n        name: '',\n        password: '',\n      },\n      load: false,\n      validationErrors: {},\n    }\n  },\n\n  mounted () {\n    this.validationErrors = Object.assign({}, this.form)\n  },\n\n  methods: {\n    ...mapActions({\n      signup: 'auth/signUp',\n    }),\n\n    async validate () {\n      try {\n        await axios.post('signup/validate', this.form)\n      } catch ({ response: { data: { errors }} }) {\n        this.validationErrors = mapValues(errors, (errors) => {\n          return head(errors)\n        })\n\n        this.load = false\n\n        return false\n      }\n\n      return true\n    },\n\n    async register () {\n      this.load = true\n\n      const valid = await this.validate()\n\n      if (valid) {\n        this.signup({\n          data: this.form,\n          cb: () => {\n            this.load = false\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n/deep/ input {\n  @apply bg-grey-lighter rounded my-3 p-4 w-full\n}\n</style>\n",null]}