(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cea"],{"024e":function(e,t,a){"use strict";var s=a("b04e"),r=a.n(s);r.a},6427:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{staticClass:"bg-grey-lightest"},[a("h1",{staticClass:"text-center my-4 md:my-8",attrs:{slot:"page-title"},slot:"page-title"},[e._v("\n    Change Password\n  ")]),a("div",{staticClass:"flex items-center justify-between border-b pb-4 mb-4"},[a("h6",{staticClass:"font-medium"},[e._v("\n      Change Password\n    ")])]),a("form",{staticClass:"flex-1 flex flex-col justify-between",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",[a("div",{staticClass:"cols"},[a("div",{staticClass:"col half"},[a("BasePassword",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"password",type:"password",placeholder:"Old Password"},model:{value:e.password.old,callback:function(t){e.$set(e.password,"old",t)},expression:"password.old"}}),e.message.old?a("span",{staticClass:"text-red text-xs"},[e._v("\n            "+e._s(e.message.old)+"\n          ")]):e._e()],1)]),a("div",{staticClass:"cols"},[a("div",{staticClass:"col half"},[a("BasePassword",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"password",type:"password",placeholder:"New Password"},model:{value:e.password.new,callback:function(t){e.$set(e.password,"new",t)},expression:"password.new"}}),e.message.new?a("span",{staticClass:"text-red text-xs"},[e._v("\n            "+e._s(e.message.new)+"\n          ")]):e._e()],1)])]),a("div",{staticClass:"flex justify-center lg:justify-end"},[a("BaseButton",{staticClass:"min-width shadow",attrs:{disabled:!e.canUpdate,type:"submit"}},[e.load?a("BaseIcon",{attrs:{name:"spinner",spin:""}}):a("span",[e._v("\n          SAVE\n        ")])],1)],1)])])},r=[],n=(a("96cf"),a("3040")),o=a("c93e"),i=a("a78e"),c=a.n(i),l=a("c55f"),d=a("4328"),u=a.n(d),p=a("2f62"),f=a("2ef0"),v=a("eae4"),h={page:{title:"Change Password",meta:[{name:"description",content:"ChangePassword"}]},components:{Layout:l["a"]},data:function(){return{password:{old:"",new:""},load:!1,message:{old:"",new:""},canUpdate:!1,validationErrors:{}}},watch:{password:{handler:function(e){e.old&&e.new&&(this.canUpdate=!0),this.clear()},deep:!0}},computed:Object(o["a"])({},Object(p["c"])({user:"auth/user"})),mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.verify()){e.next=14;break}return e.prev=1,this.load=!0,e.next=5,this.updateUser({id:this.user.id,password:c.a.get("password")});case 5:Object(v["c"])({text:"Password successfully changed.",width:500}),c.a.remove("password"),this.$router.push({name:"change-password"}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t=e.t0.response.data.message,this.message.new=t;case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}(),methods:Object(o["a"])({},Object(p["b"])({updateUser:"profile/updateUser",authorizeToChangePass:"auth/logIn",canChangePass:"auth/canChangePass"}),{verify:function(){var e=u.a.parse(this.$route.hash.substring(1)),t=Object(f["get"])(e,"access_token","");return!!c.a.get("password")&&32===t.length},cachePassword:function(){var e=1.5,t=new Date;t.setTime(t.getTime()+60*e*1e3),c.a.set("password",this.password.new,{expires:t})},submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.load=!0,this.clear(),this.cachePassword(),this.authorizeToChangePass({username:this.user.username,password:this.password.old,redirectUri:"".concat(location.origin,"/password/change"),cb:function(){t.message.old="Incorrect password",t.load=!1}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),clear:function(){this.message={old:"",new:""}}})},m=h,w=a("2877"),b=Object(w["a"])(m,s,r,!1,null,null,null);b.options.__file="ChangePassword.vue";t["default"]=b.exports},"70ce":function(e,t,a){"use strict";var s=a("fcf3"),r=a.n(s);r.a},b04e:function(e,t,a){},c55f:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavBar"),a("div",{staticClass:"content px-3 lg:px-0"},[e._t("page-title"),a("div",{staticClass:"container mx-auto mb-12"},[a("div",{staticClass:"flex flex-col md:flex-row"},[a("SideBar"),a("div",{staticClass:"white-wrapper flex flex-col flex-1 ml-0 md:ml-6"},[e._t("default")],2)],1)])],2),a("Breadcrumbs"),a("AppFooter")],1)},r=[],n=a("d000"),o=a("b6c6"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar"},[a("Uploader"),a("ul",e._l(e.menu,function(t,s){return a("li",{key:s},[a("router-link",{staticClass:"text font-semibold hover:text-green-dark",attrs:{"active-class":"text-green-dark",exact:"",to:t.path}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)}))],1)},c=[],l=a("c93e"),d=a("2f62"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploader"},[a("div",{staticClass:"avatar-wrapper"},[e.load?a("div",{staticClass:"loader"},[a("BaseIcon",{attrs:{name:"spinner",spin:""}})],1):e._e(),a("LazyLoad",{attrs:{src:e.avatar}},[a("img",{attrs:{src:e.avatar}}),a("div",{staticClass:"placeholder",attrs:{slot:"placeholder"},slot:"placeholder"},[a("BaseIcon",{attrs:{name:"spinner",spin:""}})],1)])],1),a("a",{staticClass:"label text font-semibold cursor-pointer",on:{click:function(t){e.$upload.select("profile-avatar")}}},[a("BaseIcon",{attrs:{name:"camera"}}),e._v("\n    Upload Picture\n  ")],1)])},p=[],f=(a("96cf"),a("3040")),v=(a("551c"),a("ea07")),h=a("2ef0"),m=a("eae4"),w={components:{LazyLoad:v["VueClazyLoad"]},data:function(){return{load:!1}},created:function(){var e=this;this.$upload.on("profile-avatar",{onError:function(e){Object(m["a"])({text:"Error uploading avatar."})},http:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.load=!0,t.next=3,e.uploadAvatar(a.body);case 3:e.load=!1,Object(m["c"])({text:"Avatar uploaded."});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},computed:Object(l["a"])({},Object(d["c"])({user:"auth/user"}),{avatar:function(){var e=Object(h["get"])(this.user,"avatar");return e||"/avatar.svg"}}),methods:Object(l["a"])({},Object(d["b"])({uploadAvatar:"profile/uploadAvatar"}))},b=w,g=(a("70ce"),a("2877")),x=Object(g["a"])(b,u,p,!1,null,null,null);x.options.__file="Uploader.vue";var C=x.exports,_={components:{Uploader:C},computed:Object(l["a"])({},Object(d["c"])({menu:"sidebarMenu/getSidebarMenu"}))},j=_,y=(a("024e"),Object(g["a"])(j,i,c,!1,null,"71db7090",null));y.options.__file="SideBar.vue";var O=y.exports,P=a("fd2d"),k={components:{NavBar:n["a"],AppFooter:P["a"],Breadcrumbs:o["a"],SideBar:O}},B=k,U=Object(g["a"])(B,s,r,!1,null,null,null);U.options.__file="User.vue";t["a"]=U.exports},fcf3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2cea-legacy.c83a8499.js.map